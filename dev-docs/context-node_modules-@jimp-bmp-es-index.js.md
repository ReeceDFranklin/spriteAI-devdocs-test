

  
---
# toAGBR node_modules/@jimp/bmp/es/index.js
## Imported Code Object
The `toAGBR` function in this code snippet is transforming an image's pixel data from the RGBA (Red, Green, Blue, Alpha) color format to the AGBR (Alpha, Green, Blue, Red) format. Here's what it does:

1. It scans through each pixel of the image.
2. For each pixel, it reads the RGBA values.
3. It then rearranges these values, writing them back in AGBR order.
4. This process effectively swaps the positions of the Alpha and Red channels while keeping Green and Blue in their original positions.

The function returns the modified bitmap data of the image, now in AGBR format. This kind of color format transformation can be useful in certain image processing tasks or when working with specific image formats or systems that expect data in this particular order.

### Third Party Libaries

The `toAGBR` function itself does not directly use any third-party APIs or libraries, but it appears to be using a `scan` function and accessing a `bitmap` property, which might be part of a larger image processing library or framework not shown in this code snippet.

### Code Example

Certainly! Here's a brief code example of how to use the `toAGBR` function:

```javascript
const Jimp = require('jimp');

// Function to convert image to AGBR format
function toAGBR(image) {
  return scan(image, 0, 0, image.bitmap.width, image.bitmap.height, function (x, y, index) {
    const red = this.bitmap.data[index + 0];
    const green = this.bitmap.data[index + 1];
    const blue = this.bitmap.data[index + 2];
    const alpha = this.bitmap.data[index + 3];
    this.bitmap.data[index + 0] = alpha;
    this.bitmap.data[index + 1] = blue;
    this.bitmap.data[index + 2] = green;
    this.bitmap.data[index + 3] = red;
  }).bitmap;
}

// Usage example
async function convertImageToAGBR(inputPath, outputPath) {
  try {
    // Read the input image
    const image = await Jimp.read(inputPath);

    // Convert the image to AGBR format
    const agbrBitmap = toAGBR(image);

    // Create a new Jimp image from the AGBR bitmap
    const agbrImage = new Jimp(agbrBitmap);

    // Save the AGBR image
    await agbrImage.writeAsync(outputPath);

    console.log('Image converted to AGBR format and saved successfully.');
  } catch (error) {
    console.error('Error:', error);
  }
}

// Example usage
const inputImagePath = 'path/to/input/image.jpg';
const outputImagePath = 'path/to/output/agbr_image.png';

convertImageToAGBR(inputImagePath, outputImagePath);
```

In this example:

1. We import the `Jimp` library, which is required for image processing.

2. We define the `toAGBR` function as provided in your original code.

3. We create an async function `convertImageToAGBR` that takes an input image path and an output image path.

4. Inside `convertImageToAGBR`, we:
   - Read the input image using `Jimp.read()`.
   - Convert the image to AGBR format using the `toAGBR` function.
   - Create a new Jimp image from the AGBR bitmap.
   - Save the AGBR image to the specified output path.

5. Finally, we provide an example usage of the `convertImageToAGBR` function with sample input and output paths.

To use this code, make sure you have the `jimp` library installed (`npm install jimp`), and replace the `inputImagePath` and `outputImagePath` with your actual file paths.

This example demonstrates how to use the `toAGBR` function to convert an image to the AGBR format and save it as a new image file.


  